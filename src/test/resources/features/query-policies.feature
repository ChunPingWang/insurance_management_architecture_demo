# language: zh-TW
@US6 @QueryPolicies
功能: US6 - 查詢保戶保單
  作為一個客服/業務人員
  我想要查詢保戶的所有保單
  以便了解客戶的保險情況

  背景:
    假設 系統中已有一位 ACTIVE 狀態的保戶 "PH0000000001"
    而且 該保戶擁有以下保單:
      | policyId     | policyType | status |
      | PO0000000001 | LIFE       | ACTIVE |
      | PO0000000002 | HEALTH     | ACTIVE |
      | PO0000000003 | TRAVEL     | TERMINATED |

  @Happy
  場景: 成功查詢保戶的所有保單
    當 我查詢保戶 "PH0000000001" 的所有保單
    那麼 系統應回傳狀態碼 200
    而且 回應應包含 3 筆保單

  @Happy
  場景: 依保單類型篩選
    當 我查詢保戶 "PH0000000001" 類型為 "LIFE" 的保單
    那麼 系統應回傳狀態碼 200
    而且 回應應包含 1 筆保單
    而且 保單類型應為 "LIFE"

  @Happy
  場景: 依保單狀態篩選
    當 我查詢保戶 "PH0000000001" 狀態為 "ACTIVE" 的保單
    那麼 系統應回傳狀態碼 200
    而且 回應應包含 2 筆保單
    而且 所有保單狀態應為 "ACTIVE"

  @Happy
  場景: 同時依類型與狀態篩選
    當 我查詢保戶 "PH0000000001" 類型為 "LIFE" 且狀態為 "ACTIVE" 的保單
    那麼 系統應回傳狀態碼 200
    而且 回應應包含 1 筆保單

  @Happy
  場景: 保戶無保單時回傳空列表
    假設 系統中已有一位 ACTIVE 狀態的保戶 "PH0000000002" 且無保單
    當 我查詢保戶 "PH0000000002" 的所有保單
    那麼 系統應回傳狀態碼 200
    而且 回應應包含 0 筆保單

  @Happy
  場景: 查詢單一保單詳細資訊
    當 我查詢保戶 "PH0000000001" 的保單 "PO0000000001"
    那麼 系統應回傳狀態碼 200
    而且 回應應包含保單編號 "PO0000000001"
    而且 回應應包含保單類型 "LIFE"
    而且 回應應包含保戶編號 "PH0000000001"

  @Error
  場景: 查詢不存在的保戶保單
    當 我查詢保戶 "PH9999999999" 的所有保單
    那麼 系統應回傳狀態碼 404
    而且 錯誤代碼應為 "POLICY_HOLDER_NOT_FOUND"

  @Error
  場景: 查詢不存在的保單
    當 我查詢保戶 "PH0000000001" 的保單 "PO9999999999"
    那麼 系統應回傳狀態碼 404
